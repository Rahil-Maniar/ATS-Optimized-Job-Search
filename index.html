<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="icon.png" sizes="16x16">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>India Job Search Aggregator - Find Jobs Across Multiple Platforms | Free Job Search Tool</title>
    <meta name="description" content="Discover your dream job in India with our comprehensive job search aggregator. Search across Naukri, LinkedIn, Indeed, government jobs, and 40+ platforms simultaneously. Free tool for job seekers.">
    <meta name="keywords" content="job search India, Naukri jobs, LinkedIn jobs, Indeed India, government jobs, IT jobs, fresher jobs, remote jobs, job aggregator, career search">
    <meta name="author" content="Rahil Maniar">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="India Job Search Aggregator - Find Jobs Across Multiple Platforms">
    <meta property="og:description" content="Search for jobs across 40+ platforms including Naukri, LinkedIn, Indeed, government jobs, and major companies. Free comprehensive job search tool for India.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rahil-maniar.github.io/ATS-Optimized-Job-Search/">
    <meta property="og:site_name" content="India Job Search Aggregator">
    <meta property="og:locale" content="en_IN">
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#4a90e2">
    <meta name="msapplication-TileColor" content="#4a90e2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Job Search India">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9T913Y0WNP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-9T913Y0WNP');
    </script>
    <!-- End Google tag -->

    <style>
        :root {
            --bg-color: #1e1e1e;
            --surface-color: #2c2c2c;
            --primary-text-color: #e0e0e0;
            --secondary-text-color: #b0b0b0;
            --accent-color: #4a90e2;
            --accent-hover-color: #357abd;
            --border-color: #444;
            --input-bg-color: #333;
            --hover-bg-color: #3a3a3a;
            --card-bg-color: #333;
            --link-color: #8ab4f8;
            --link-hover-color: #a8c7fa;
            --success-color: #4caf50;
            --warning-color: #ff9800;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--primary-text-color);
            line-height: 1.6;
            padding-bottom: 40px;
        }
        .container {
            max-width: 1000px;
            margin: 30px auto;
            background-color: var(--surface-color);
            padding: 20px 30px 30px 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }
        h1 {
            text-align: center;
            color: var(--accent-color);
            margin-bottom: 30px;
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .header-icon { width: 32px; height: 32px; object-fit: contain; }
        .header-subtitle { text-align: center; color: var(--secondary-text-color); font-size: 1rem; margin-bottom: 25px; font-style: italic; }
        
        .presets-section { margin-bottom: 30px; }
        .presets-section h3 { font-size: 1rem; color: var(--secondary-text-color); text-align: center; margin-bottom: 15px; font-weight: normal; }
        .presets-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; }
        .preset-button { background-color: var(--hover-bg-color); color: var(--primary-text-color); padding: 8px 16px; border-radius: 20px; font-size: 0.9rem; cursor: pointer; border: 1px solid var(--border-color); transition: all 0.2s; font-weight: 600; }
        .preset-button:hover { background-color: var(--accent-color); border-color: var(--accent-color); transform: translateY(-1px); }

        .form-row { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        @media (max-width: 768px) { .form-row { grid-template-columns: 1fr; gap: 15px; } }
        .form-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 10px; font-weight: bold; color: var(--secondary-text-color); font-size: 0.95rem; }
        input[type="text"], select { width: 100%; padding: 12px 15px; border: 1px solid var(--border-color); border-radius: 6px; box-sizing: border-box; background-color: var(--input-bg-color); color: var(--primary-text-color); font-size: 1rem; transition: border-color 0.2s, box-shadow 0.2s; }
        input[type="text"]::placeholder { color: #777; }
        input[type="text"]:focus, select:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.3); }

        .quick-filters { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
        .filter-tag { background-color: var(--hover-bg-color); color: var(--primary-text-color); padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; cursor: pointer; border: 1px solid var(--border-color); transition: all 0.2s; }
        .filter-tag:hover, .filter-tag.active { background-color: var(--accent-color); border-color: var(--accent-color); }
        
        .advanced-options { background-color: rgba(74, 144, 226, 0.1); border: 1px solid var(--accent-color); padding: 15px; border-radius: 8px; margin-top: -10px; margin-bottom: 25px; }
        .advanced-options label { display: inline-flex; align-items: center; cursor: pointer; font-weight: normal; color: var(--primary-text-color); }
        .advanced-options input[type="checkbox"] { width: 16px; height: 16px; margin-right: 12px; accent-color: var(--accent-color); }

        fieldset { border: 1px solid var(--border-color); padding: 15px 20px; border-radius: 8px; margin-bottom: 25px; }
          legend {
            padding: 12px 16px; font-size: 1.1rem; color: var(--accent-color); font-weight: bold; width: 100%;
            display: flex; justify-content: space-between; align-items: center; cursor: pointer;
            background: linear-gradient(135deg, var(--hover-bg-color), var(--card-bg-color));
            border-radius: 8px; margin: -15px -20px 15px -20px; transition: all 0.3s ease;
            border: 1px solid transparent; box-sizing: border-box;
        }
        legend:hover {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-hover-color));
            color: white; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
            border-color: var(--accent-color);
        }
        .collapse-icon { 
            font-size: 1.2rem; color: inherit; transition: transform 0.3s ease-in-out;
            background: rgba(255, 255, 255, 0.1); border-radius: 50%; width: 28px; height: 28px;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
        }
        fieldset:not(.active) .collapse-icon { transform: rotate(-90deg); }
        
        .collapsible-content {
            max-height: 0; overflow: hidden; opacity: 0;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
        }
        fieldset.active .collapsible-content {
            max-height: 2000px; opacity: 1;
            transition: max-height 0.7s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease 0.1s;
        }
        
        .job-sources-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin-top: 10px; }
        .job-sources-grid label { font-weight: normal; display: flex; align-items: center; background-color: var(--hover-bg-color); padding: 12px; border-radius: 6px; cursor: pointer; transition: background-color 0.2s, box-shadow 0.2s, opacity 0.3s; font-size: 0.9rem; }
        .job-sources-grid label:hover { background-color: #454545; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .job-sources-grid label.disabled { cursor: not-allowed; opacity: 0.5; background-color: #333; }
        .job-sources-grid input[type="checkbox"] { margin-right: 12px; accent-color: var(--accent-color); width: 16px; height: 16px; cursor: pointer; }
        
        /* MODIFIED: Adjusted Select All container margin */
        .select-all-container { margin-top: 15px; margin-bottom: 5px; }
        .select-all-container label { display: inline-flex; align-items: center; font-weight: normal; margin-right: 15px; font-size: 0.9rem; }
        .select-all-container input[type="checkbox"] { margin-right: 8px; }

        .button-group { display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap; position: relative; }
        button { padding: 14px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: all 0.2s; letter-spacing: 0.5px; }
        button#searchButton { background-color: var(--accent-color); color: white; flex: 2; }
        button#searchButton:hover { background-color: var(--accent-hover-color); transform: translateY(-1px); }
        button#clearButton { background-color: var(--secondary-text-color); color: var(--bg-color); flex: 1; }
        button#clearButton:hover { background-color: #9e9e9e; transform: translateY(-1px); }
        button#openAllButton, button#copyLinkButton { flex: 1; display: none; }
        button#openAllButton { background-color: var(--success-color); color: white; }
        button#openAllButton:hover { background-color: #45a049; transform: translateY(-1px); }
        button#copyLinkButton { background-color: var(--warning-color); color: white; }
        button#copyLinkButton:hover { background-color: #f57c00; transform: translateY(-1px); }
        button:active { transform: translateY(0px); }
        
        #copyNotification {
            position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); background-color: var(--success-color);
            color: white; padding: 8px 15px; border-radius: 6px; font-size: 0.9rem; font-weight: bold; z-index: 10;
            opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s;
        }
        #copyNotification.show { opacity: 1; visibility: visible; }
  
        #loadingMessage { text-align: center; color: var(--secondary-text-color); font-style: italic; margin-top: 15px; display: none; }
        .search-summary { background-color: var(--card-bg-color); padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid var(--accent-color); display: none; }
        .search-summary h3 { margin: 0 0 10px 0; color: var(--accent-color); font-size: 1.1rem; }
        .search-summary .query-preview { font-family: monospace; background-color: var(--hover-bg-color); padding: 8px; border-radius: 4px; font-size: 0.9rem; margin-top: 8px; }
        #results { margin-top: 35px; }
        #results h2 { color: var(--accent-color); border-bottom: 2px solid var(--border-color); padding-bottom: 12px; font-size: 1.5rem; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .results-count { font-size: 0.9rem; color: var(--secondary-text-color); font-weight: normal; }
        .results-category-group { margin-bottom: 30px; }
        .results-category-group h3 { color: var(--secondary-text-color); font-size: 1.2rem; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
        .results-category-group ul { list-style-type: none; padding: 0; }
        #linksListContainer li { background-color: var(--card-bg-color); padding: 15px; margin-bottom: 12px; border-radius: 6px; border-left: 4px solid var(--accent-color); transition: box-shadow 0.2s; }
        #linksListContainer li:hover { box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        #linksListContainer a { text-decoration: none; color: var(--link-color); font-weight: 600; font-size: 1rem; }
        #linksListContainer a:hover { text-decoration: underline; color: var(--link-hover-color); }
        .result-source-name { font-weight: bold; color: var(--primary-text-color); }
        .result-recency { font-size: 0.85em; color: var(--secondary-text-color); display: block; margin-top: 4px; }
        .recent-searches { background-color: var(--hover-bg-color); padding: 15px; border-radius: 6px; margin-bottom: 25px; display: none; }
        .recent-searches h3 { margin: 0 0 10px 0; color: var(--accent-color); font-size: 1rem; }
        .recent-search-item { display: inline-block; background-color: var(--card-bg-color); padding: 6px 12px; margin: 4px 8px 4px 0; border-radius: 15px; font-size: 0.85rem; cursor: pointer; border: 1px solid var(--border-color); transition: all 0.2s; }
        .recent-search-item:hover { background-color: var(--accent-color); color: white; }
        a[href*="googleforms"]:hover, a[href*="linkedin"]:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.4) !important; }
        @media (max-width: 640px) { div[style*="display: flex; flex-wrap: wrap"] { flex-direction: column !important; } a[href*="googleforms"], a[href*="linkedin"] { width: 100% !important; justify-content: center !important; } }
        .intro-banner { background: linear-gradient(135deg, var(--accent-color), var(--accent-hover-color)); color: white; padding: 20px; border-radius: 8px; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3); }
        .intro-content h2 { margin: 0 0 8px 0; font-size: 1.3rem; font-weight: bold; }
        .intro-content p { margin: 0 0 15px 0; font-size: 0.95rem; opacity: 0.95; }
        .action-steps { display: flex; justify-content: space-between; gap: 15px; flex-wrap: wrap; }
        .step-item { background-color: rgba(255, 255, 255, 0.15); padding: 8px 12px; border-radius: 6px; font-size: 0.85rem; font-weight: 600; flex: 1; min-width: 140px; }
        @media (max-width: 768px) { .action-steps { flex-direction: column; gap: 8px; } .step-item { text-align: center; } }
        .link-status-indicator { display: inline-flex; align-items: center; gap: 8px; width: 100%; }
        .visit-badge { font-size: 0.75rem; padding: 2px 6px; border-radius: 10px; font-weight: bold; min-width: 60px; text-align: center; }
        .visit-badge.unvisited { background-color: var(--accent-color); color: white; }
        .visit-badge.visited { background-color: var(--success-color); color: white; }
        #linksListContainer a.visited-link { opacity: 0.7; position: relative; }
        #linksListContainer a.visited-link::after { content: "‚úì"; position: absolute; right: -20px; top: 0; color: var(--success-color); font-weight: bold; }
        #linksListContainer a.visited-link:hover { opacity: 1; }
        .tracking-controls { display: flex; gap: 10px; margin-top: 10px; align-items: center; }
        .clear-tracking-btn { background-color: var(--warning-color); color: white; border: none; padding: 6px 12px; border-radius: 4px; font-size: 0.8rem; cursor: pointer; transition: all 0.2s; }
        .clear-tracking-btn:hover { background-color: #f57c00; transform: translateY(-1px); }
        .tracking-info { font-size: 0.8rem; color: var(--secondary-text-color); }
    </style>
</head>
<body>
    <div class="container">
    <h1>
        <img src="icon.png" alt="Job Search Icon" class="header-icon">
        India Job Search Aggregator
    </h1>
    <div class="header-subtitle">Be an early applicant on your dream job. Write keywords that the Job description of your desired job would contain. <br>- Inspired by Brian's Job Search</div>

        <div class="intro-banner">
            <div class="intro-content">
                <h2>üéØ Get Jobs Before Others Do</h2>
                <p><strong>Simple strategy:</strong> Apply within 24 hours of job posting = 3x better response rate. Find jobs before others even know they exist.</p>
                <div class="action-steps">
                    <div class="step-item">1. Enter job keywords</div>
                    <div class="step-item">2. Select "Past 24 Hours" Recency</div>
                    <div class="step-item">3. Pick platforms ‚Üí Scroll down ‚Üí Generate Links ‚Üí Apply</div>
                </div>
            </div>
        </div>

        <div class="recent-searches" id="recentSearches">
            <h3>Recent Searches</h3>
            <div id="recentSearchesList"></div>
        </div>
        
        <div class="presets-section">
            <h3>Don't know where to start? Try a preset:</h3>
            <div class="presets-container" id="presetsContainer"></div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="keywords">Keywords:</label>
                <input type="text" id="keywords" placeholder="e.g., Software Engineer, Python, Power BI">
                <div class="quick-filters">
                    <span class="filter-tag" onclick="addKeyword('remote')">Remote</span>
                    <span class="filter-tag" onclick="addKeyword('work from home')">WFH</span>
                    <span class="filter-tag" onclick="addKeyword('fresher')">Fresher</span>
                    <span class="filter-tag" onclick="addKeyword('internship')">Internship</span>
                </div>
            </div>
            <div class="form-group">
                <label for="location">Location:</label>
                <select id="location" onchange="toggleCustomLocation()">
                    <option value="">All Locations</option>
                    <option value="India">India</option>
                    <option value="USA">USA</option>
                    <option value="Mumbai">Mumbai</option>
                    <option value="Bangalore">Bangalore</option>
                    <option value="Delhi">Delhi</option>
                    <option value="Pune">Pune</option>
                    <option value="Hyderabad">Hyderabad</option>
                    <option value="Chennai">Chennai</option>
                    <option value="Kolkata">Kolkata</option>
                    <option value="Ahmedabad">Ahmedabad</option>
                    <option value="Noida">Noida</option>
                    <option value="Gurgaon">Gurgaon</option>
                    <option value="remote">Remote</option>
                    <option value="other">Other</option>
                </select>
                <input type="text" id="customLocation" placeholder="Enter your city/location" style="display: none; margin-top: 10px;">
            </div>
            <div class="form-group">
                <label for="recency">Recency:</label>
                <select id="recency">
                    <option value="">Anytime</option>
                    <option value="h">Past Hour</option>
                    <option value="d">Past 24 Hours</option>
                    <option value="d3">Past 3 Days</option>
                    <option value="w">Past Week</option>
                    <option value="w2">Past 2 Weeks</option>
                    <option value="m">Past Month</option>
                </select>
            </div>
        </div>

        <div class="advanced-options">
            <label for="hiddenGemsToggle">
                <input type="checkbox" id="hiddenGemsToggle" onchange="handleHiddenGemsToggle()">
                Find jobs on company sites only (hides major job boards)
            </label>
        </div>
        
        <!-- MODIFIED HTML Structure for Collapsible Sections -->
        <fieldset id="platforms-fieldset" class="active">
            <legend onclick="toggleCollapsible(this)">
                Job Platforms & ATS
                <span class="collapse-icon">‚ñº</span>
            </legend>
            <div class="select-all-container">
                 <input type="checkbox" id="selectAllPlatforms" onclick="toggleSelectAll(this, 'platform-checkbox')">
                 <label for="selectAllPlatforms">Select All Platforms/ATS</label>
            </div>
            <div class="collapsible-content">
                <div class="job-sources-grid" id="jobPlatforms"></div>
            </div>
        </fieldset>        <fieldset id="companies-fieldset" class="active">
            <legend onclick="toggleCollapsible(this)">
                Major Companies & MNCs
                <span class="collapse-icon">‚ñº</span>
            </legend>
            <div class="select-all-container">
                <input type="checkbox" id="selectAllMNCs" onclick="toggleSelectAll(this, 'mnc-checkbox')">
                <label for="selectAllMNCs">Select All Companies</label>
            </div>
            <div class="collapsible-content">
                <div class="job-sources-grid" id="mncJobSources"></div>
            </div>
        </fieldset>        <fieldset id="gov-fieldset" class="active">
            <legend onclick="toggleCollapsible(this)">
                Government, Banking & PSUs
                <span class="collapse-icon">‚ñº</span>
            </legend>
            <div class="select-all-container">
                <input type="checkbox" id="selectAllGov" onclick="toggleSelectAll(this, 'gov-checkbox')">
                <label for="selectAllGov">Select All Gov/PSU</label>
            </div>
            <div class="collapsible-content">
                <div class="job-sources-grid" id="govJobSources"></div>
            </div>
        </fieldset>
        
        <div class="button-group">
            <button id="searchButton" onclick="generateSearchLinks()">Generate Search Links</button>
            <button id="clearButton" onclick="clearFormWithConfirm()">Clear Form</button>
            <button id="openAllButton" onclick="openAllLinks()">Open All Links</button>
            <button id="copyLinkButton" onclick="copyShareableLink()">Copy Sharable Link</button>
            <div id="copyNotification">Link copied to clipboard!</div>
        </div>
        
        <div id="loadingMessage">Generating links, please wait...</div>
        <div class="search-summary" id="searchSummary"></div>
        <div id="results"></div>
        <div style="margin-top: 40px; padding: 25px; background-color: var(--card-bg-color); border-radius: 12px; border: 1px solid var(--border-color); box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
            <div style="text-align: center; margin-bottom: 20px;">
                <h3 style="color: var(--accent-color); margin: 0 0 10px 0; font-size: 1.3rem; display: flex; align-items: center; justify-content: center; gap: 10px;"><span style="font-size: 1.5rem;">üí¨</span> Feedback & Connect</h3>
                <p style="color: var(--secondary-text-color); margin: 0; font-size: 0.95rem;">Help us improve the India Job Search Aggregator</p>
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; align-items: center;">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSecdzSP15_NIPA17r9sRutWxjFnKJD3SbyxCK0GE6EP8I6Bhw/viewform?usp=header" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; gap: 8px; background-color: var(--success-color); color: white; padding: 12px 20px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.2s; box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);"><span style="font-size: 1.1rem;">üìù</span> Share Feedback</a>
                <a href="https://www.linkedin.com/in/rahil-maniar-9a1707220" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; gap: 8px; background-color: #0077b5; color: white; padding: 12px 20px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.2s; box-shadow: 0 2px 8px rgba(0, 119, 181, 0.3);"><span style="font-size: 1.1rem;">üíº</span> Connect on LinkedIn</a>
            </div>
            <div style="text-align: center; margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                <p style="color: var(--secondary-text-color); margin: 0; font-size: 0.85rem; font-style: italic;">Your suggestions help make this tool better for everyone! üöÄ</p>
            </div>
        </div>
        
    </div>

    <script>
        const jobPlatformConfig = [
            { name: "Apna.co Jobs", site: "apna.co/jobs" }, { name: "Ashby ATS", site: "jobs.ashbyhq.com" },
            { name: "BambooHR ATS", site: "bamboohr.com/careers" }, { name: "Built In (US Tech)", site: "builtin.com" },
            { name: "Cutshort", site: "cutshort.io" }, { name: "Dice (US Tech)", site: "dice.com" },
            { name: "Foundit (Monster)", site: "foundit.in" }, { name: "Freshersworld", site: "freshersworld.com" },
            { name: "Glassdoor", site: "glassdoor.co.in/Job" }, { name: "Greenhouse ATS", site: "boards.greenhouse.io" },
            { name: "Hired (US Tech)", site: "hired.com" }, { name: "Hirist (Tech)", site: "hirist.com" },
            { name: "Indeed", site: "indeed.co.in" }, { name: "Instahyre", site: "instahyre.com" },
            { name: "Internshala Internships", site: "internshala.com/internships" }, { name: "Internshala Jobs", site: "internshala.com/jobs" },
            { name: "Lever ATS", site: "jobs.lever.co" }, { name: "LinkedIn Jobs", site: "linkedin.com/jobs" },
            { name: "Naukri.com", site: "naukri.com" }, { name: "Otta (Tech)", site: "otta.com" },
            { name: "Shine.com", site: "shine.com" }, { name: "SmartRecruiters ATS", site: "jobs.smartrecruiters.com" },
            { name: "TimesJobs", site: "timesjobs.com" }, { name: "Wellfound (AngelList)", site: "wellfound.com" },
            { name: "Workday ATS", site: "myworkdayjobs.com" }, { name: "YC Work at a Startup", site: "workatastartup.com" },
            { name: "ZipRecruiter", site: "ziprecruiter.com" }
        ];

        const mncConfig = [
            { name: "Accenture", site: "accenture.com/in-en/careers" }, { name: "Adobe", site: "careers.adobe.com" },
            { name: "Airbnb", site: "careers.airbnb.com" }, { name: "Amazon", site: "amazon.jobs" },
            { name: "AMD", site: "amd.com/careers" }, { name: "Apple", site: "jobs.apple.com" },
            { name: "Atlassian", site: "atlassian.com/company/careers" }, { name: "Bain & Company", site: "bain.com/careers" },
            { name: "BCG", site: "careers.bcg.com" }, { name: "Broadcom", site: "broadcom.com/company/careers" },
            { name: "Capgemini", site: "capgemini.com/careers" }, { name: "Cisco", site: "cisco.com/careers" },
            { name: "Cognizant", site: "careers.cognizant.com" }, { name: "Deloitte", site: "southasiacareers.deloitte.com" },
            { name: "EY", site: "ey.com/en_gl/careers" }, { name: "Goldman Sachs", site: "goldmansachs.com/careers" },
            { name: "Google", site: "careers.google.com" }, { name: "HCLTech", site: "hcltech.com/careers" },
            { name: "IBM", site: "ibm.com/careers" }, { name: "Infosys", site: "infosys.com/careers" },
            { name: "Intel", site: "intel.com/jobs" }, { name: "JPMorgan Chase", site: "careers.jpmorgan.com" },
            { name: "McKinsey & Company", site: "mckinsey.com/careers" }, { name: "Meta", site: "careers.meta.com" },
            { name: "Microsoft", site: "careers.microsoft.com" }, { name: "Morgan Stanley", site: "morganstanley.com/people-opportunities" },
            { name: "Netflix", site: "jobs.netflix.com" }, { name: "Nvidia", site: "nvidia.com/careers" },
            { name: "Oracle", site: "oracle.com/careers" }, { name: "PwC", site: "pwc.com/careers" },
            { name: "Qualcomm", site: "qualcomm.com/company/careers" }, { name: "Salesforce", site: "careers.salesforce.com" },
            { name: "SAP", site: "jobs.sap.com" }, { name: "ServiceNow", site: "servicenow.com/careers" },
            { name: "Spotify", site: "lifeatspotify.com/jobs" }, { name: "Stripe", site: "stripe.com/jobs" },
            { name: "TCS", site: "tcs.com/careers" }, { name: "Tesla", site: "tesla.com/careers" },
            { name: "Uber", site: "uber.com/careers" }, { name: "Walmart", site: "careers.walmart.com" },
            { name: "Wipro", site: "careers.wipro.com" }
        ];

        const govBankingConfig = [
            { name: "Axis Bank", site: "axisbank.com/careers" }, { name: "Banking Personnel (IBPS)", site: "ibps.in" },
            { name: "BHEL", site: "bhel.com/careers" }, { name: "BPCL", site: "bharatpetroleum.in/careers" },
            { name: "Coal India", site: "coalindia.in/careers" }, { name: "GAIL", site: "gailonline.com" },
            { name: "HDFC Bank", site: "hdfcbank.com/careers" }, { name: "ICICI Bank", site: "icicibank.com/careers" },
            { name: "IndusInd Bank", site: "indusind.com/careers" }, { name: "IOCL", site: "iocl.com/careers" },
            { name: "Kotak Bank", site: "kotak.com/careers" }, { name: "LIC", site: "licindia.in/careers" },
            { name: "NABARD", site: "nabard.org" }, { name: "NTPC", site: "ntpc.co.in/careers" },
            { name: "ONGC", site: "ongcindia.com/careers" }, { name: "Power Grid (PGCIL)", site: "powergrid.in" },
            { name: "Railway (RRB)", site: "rrbcdg.gov.in OR indianrailways.gov.in" }, { name: "RBI", site: "rbi.org.in" },
            { name: "SAIL", site: "sail.co.in/careers" }, { name: "SBI", site: "sbi.co.in/careers" },
            { name: "SSC", site: "ssc.nic.in" }, { name: "UPSC", site: "upsc.gov.in" }
        ];
        
        const MAJOR_JOB_BOARD_SITES = [ "naukri.com", "indeed.co.in", "linkedin.com/jobs", "shine.com", "foundit.in", "timesjobs.com", "apna.co/jobs", "ziprecruiter.com", "dice.com", "builtin.com", "hired.com", "otta.com" ];
        const searchPresets = {
            "entry-tech": { name: "Entry-Level Tech", keywords: "fresher graduate trainee sde-1 \"software engineer\" associate", recency: "w", sources: [ "naukri.com", "linkedin.com/jobs", "hirist.com", "cutshort.io", "wellfound.com", "boards.greenhouse.io", "jobs.lever.co" ] },
            "wfh-internships": { name: "WFH Internships", keywords: "internship intern \"work from home\" remote", recency: "w", sources: [ "internshala.com/internships", "linkedin.com/jobs", "naukri.com", "cutshort.io" ] },
            "experienced-tech": { name: "Experienced Tech (2+ Yrs)", keywords: "sde-2 \"senior software engineer\" \"software developer\"", recency: "d3", sources: [ "linkedin.com/jobs", "hirist.com", "cutshort.io", "instahyre.com", "careers.google.com", "careers.microsoft.com", "amazon.jobs" ] },
            "banking-jobs": { name: "Banking Jobs", keywords: "officer clerk manager po relationship", recency: "m", sources: [ "ibps.in", "sbi.co.in/careers", "icicibank.com/careers", "hdfcbank.com/careers", "axisbank.com/careers", "rbi.org.in", "naukri.com" ] }
        };
        
        const allSources = [...jobPlatformConfig, ...mncConfig, ...govBankingConfig];
        const sourceToIdMap = new Map();
        const idToSourceMap = new Map();
        allSources.forEach((source, index) => { const id = index.toString(36); sourceToIdMap.set(source.site, id); idToSourceMap.set(id, source.site); });

        let recentSearches = [], currentLinks = [], clickTrackingData = {}, shareableLink = '';

        function loadClickTracking() { try { const d = localStorage.getItem("jobSearchClickTracking"); d && (clickTrackingData = JSON.parse(d)) } catch (e) { console.log("Could not load click tracking data"), clickTrackingData = {} } };
        function saveClickTracking() { try { localStorage.setItem("jobSearchClickTracking", JSON.stringify(clickTrackingData)) } catch (e) { console.log("Could not save click tracking data") } };
        function trackLinkClick(l, e) { const t = btoa(l).replace(/[^a-zA-Z0-9]/g, "").substring(0, 20); clickTrackingData[t] = { url: l, clickedAt: Date.now(), count: (clickTrackingData[t]?.count || 0) + 1 }, saveClickTracking(), updateLinkVisualState(e, !0), updateTrackingInfo() };
        function isLinkClicked(l) { return !!clickTrackingData[btoa(l).replace(/[^a-zA-Z0-9]/g, "").substring(0, 20)] };
        function updateLinkVisualState(l, e) { const t = l.querySelector(".visit-badge"); t && (e ? (t.textContent = "VISITED", t.className = "visit-badge visited", l.classList.add("visited-link")) : (t.textContent = "NEW", t.className = "visit-badge unvisited", l.classList.remove("visited-link"))) };
        function clearClickTracking() { confirm("This will clear all visit history. Continue?") && (clickTrackingData = {}, saveClickTracking(), document.querySelectorAll("#linksListContainer a").forEach(l => { updateLinkVisualState(l, !1) }), updateTrackingInfo()) };
        function updateTrackingInfo() { const l = document.getElementById("trackingInfo"), e = document.querySelectorAll("#linksListContainer a.visited-link").length, t = document.querySelectorAll("#linksListContainer a").length; if(l) l.textContent = t > 0 ? `${e}/${t} links visited` : "" };

        function populateJobSources(config, containerId, checkboxClass) {
            const sourcesContainer = document.getElementById(containerId);
            sourcesContainer.innerHTML = '';
            config.forEach(source => {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox'; checkbox.value = source.site;
                checkbox.id = `source-${containerId}-${source.name.replace(/[^a-zA-Z0-9]/g, '')}`;
                checkbox.className = `job-source-checkbox ${checkboxClass}`;
                label.appendChild(checkbox); label.appendChild(document.createTextNode(` ${source.name}`));
                sourcesContainer.appendChild(label);
            });
        }

        function toggleCollapsible(legendElement) {
            const fieldset = legendElement.parentElement;
            fieldset.classList.toggle('active');
        }

        function toggleSelectAll(masterCheckbox, checkboxClass) {
            const checkboxes = document.querySelectorAll(`.${checkboxClass}`);
            checkboxes.forEach(checkbox => { if (!checkbox.disabled) { checkbox.checked = masterCheckbox.checked; } });
        }

        function addKeyword(k) { const i = document.getElementById("keywords"), v = i.value.trim(); if (v && !v.toLowerCase().includes(k.toLowerCase())) { i.value = v + ' ' + k; } else if (!v) { i.value = k; } i.focus(); };
        function addToRecentSearches(s) { const i = { keywords: s.keywords, location: s.location, timestamp: Date.now() }; recentSearches = recentSearches.filter(item => !(item.keywords === i.keywords && item.location === i.location)); recentSearches.unshift(i); recentSearches = recentSearches.slice(0, 5); updateRecentSearchesDisplay(); };
        function updateRecentSearchesDisplay() { const c = document.getElementById("recentSearches"), l = document.getElementById("recentSearchesList"); if (!c || !l || recentSearches.length === 0) { c && (c.style.display = "none"); return; } c.style.display = "block"; l.innerHTML = ''; recentSearches.forEach(i => { const d = document.createElement("div"); d.className = "recent-search-item"; d.textContent = i.keywords + (i.location ? ` in ${i.location}` : ''); d.onclick = () => { document.getElementById("keywords").value = i.keywords; document.getElementById("location").value = i.location || ''; }; l.appendChild(d); }); };

        function handleHiddenGemsToggle() {
            const isChecked = document.getElementById('hiddenGemsToggle').checked;
            const selectAllPlatformsCheckbox = document.getElementById('selectAllPlatforms');
            jobPlatformConfig.forEach(source => {
                if (MAJOR_JOB_BOARD_SITES.includes(source.site)) {
                    const checkbox = document.querySelector(`.job-source-checkbox[value="${source.site}"]`);
                    if (checkbox) {
                        const label = checkbox.parentElement;
                        if (isChecked) { checkbox.checked = false; checkbox.disabled = true; label.classList.add('disabled'); } 
                        else { checkbox.disabled = false; label.classList.remove('disabled'); }
                    }
                }
            });
            if (isChecked) { selectAllPlatformsCheckbox.checked = false; }
        }

        function applyPreset(presetKey) {
            const preset = searchPresets[presetKey];
            if (!preset) return;
            resetForm(false);
            document.getElementById('keywords').value = preset.keywords || '';
            document.getElementById('recency').value = preset.recency || '';
            document.getElementById('location').value = preset.location || '';
            if (preset.sources && Array.isArray(preset.sources)) {
                preset.sources.forEach(sourceValue => {
                    const checkbox = document.querySelector(`.job-source-checkbox[value="${sourceValue}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            updateMasterCheckboxes();
        }
        
        function populatePresets() {
            const container = document.getElementById('presetsContainer');
            if (!container) return;
            container.innerHTML = '';
            for (const key in searchPresets) {
                const preset = searchPresets[key];
                const button = document.createElement('button');
                button.className = 'preset-button';
                button.textContent = preset.name;
                button.onclick = () => applyPreset(key);
                container.appendChild(button);
            }
        }
        
        function copyShareableLink() {
            if (!shareableLink) return;
            navigator.clipboard.writeText(shareableLink).then(() => {
                const notification = document.getElementById('copyNotification');
                notification.classList.add('show');
                setTimeout(() => { notification.classList.remove('show'); }, 2000);
            }).catch(err => { console.error('Failed to copy link: ', err); alert('Failed to copy link. Please try again.'); });
        }

        function generateSearchLinks() {
            const keywords = document.getElementById('keywords').value.trim();
            if (!keywords) { alert("Please enter keywords (job title, skills, etc.)"); return; }
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `<h2>Generated Search Links <span class="results-count" id="resultsCount"></span></h2><div class="tracking-controls" id="trackingControls" style="display: none;"><button class="clear-tracking-btn" onclick="clearClickTracking()">Clear Visit History</button><span class="tracking-info" id="trackingInfo"></span></div><div id="linksListContainer"></div>`;
            const loadingMessage = document.getElementById('loadingMessage');
            const linksListContainer = document.getElementById('linksListContainer');
            const openAllButton = document.getElementById('openAllButton');
            const copyLinkButton = document.getElementById('copyLinkButton');
            linksListContainer.innerHTML = ''; loadingMessage.style.display = 'block';
            document.getElementById('searchSummary').style.display = 'none';
            openAllButton.style.display = 'none'; copyLinkButton.style.display = 'none'; shareableLink = '';

            let locationValue = document.getElementById('location').value;
            const customLocation = document.getElementById('customLocation').value.trim();
            const recencySelect = document.getElementById('recency');
            const recencyValue = recencySelect.value;
            const recencyText = recencyValue ? recencySelect.options[recencySelect.selectedIndex].text : 'Anytime';
            let finalKeywordsForGoogle = keywords;
            if (locationValue === 'remote') { finalKeywordsForGoogle += ' -bangalore -bengaluru -pune -mumbai -delhi -gurgaon -noida -hyderabad -chennai'; }
            let finalLocation = locationValue === 'other' ? customLocation || '' : locationValue;
            
            const selectedSourceSites = Array.from(document.querySelectorAll('.job-source-checkbox:checked')).map(cb => cb.value);
            if (selectedSourceSites.length === 0) { alert("Please select at least one job source."); loadingMessage.style.display = 'none'; return; }

            const selectedSources = selectedSourceSites.map(siteValue => {
                const sourceDetail = allSources.find(s => s.site === siteValue);
                let category = 'platforms';
                if(mncConfig.some(s => s.site === siteValue)) category = 'companies';
                else if(govBankingConfig.some(s => s.site === siteValue)) category = 'gov';
                return { value: siteValue, name: sourceDetail.name, category: category };
            });

            saveCurrentSearch();
            addToRecentSearches({ keywords, location: finalLocation });
            let displayQuery = keywords + (finalLocation ? ` ${finalLocation}` : '');
            let googleSearchQuery = finalKeywordsForGoogle + (finalLocation ? ` ${finalLocation}` : '');
            const summaryDiv = document.getElementById('searchSummary');
            summaryDiv.innerHTML = `<h3>Search Summary</h3><div id="summaryContent"><strong>Keywords:</strong> ${keywords}<br><strong>Location:</strong> ${finalLocation || 'All locations'}<br><strong>Recency:</strong> ${recencyText}<br><strong>Sources:</strong> ${selectedSources.length} selected<div class="query-preview">Search query: "${displayQuery}"</div></div>`;
            summaryDiv.style.display = 'block';
            currentLinks = [];
            let categorizedLinkElements = { platforms: [], companies: [], gov: [] };

            setTimeout(() => {
                selectedSources.forEach(sourceDetail => {
                    const siteOperators = sourceDetail.value.split(" OR ");
                    siteOperators.forEach(siteOperator => {
                        siteOperator = siteOperator.trim(); if (!siteOperator) return;
                        let query = `${encodeURIComponent(googleSearchQuery)} site:${siteOperator}`;
                        let searchUrl = `https://www.google.com/search?q=${query}${recencyValue ? `&as_qdr=${recencyValue}` : ''}&tbs=sbd:1`;
                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = searchUrl; link.target = "_blank";
                        link.addEventListener('click', function() { trackLinkClick(searchUrl, this); });
                        const linkContainer = document.createElement('div'); linkContainer.className = 'link-status-indicator';
                        const visitBadge = document.createElement('span'); visitBadge.className = 'visit-badge unvisited'; visitBadge.textContent = 'NEW';
                        const linkContent = document.createElement('div'); linkContent.style.flex = '1';
                        const keywordsText = document.createElement('span'); keywordsText.textContent = `Search "${displayQuery}" on `;
                        const sourceNameSpan = document.createElement('span'); sourceNameSpan.className = 'result-source-name'; sourceNameSpan.textContent = sourceDetail.name; if (siteOperators.length > 1) { sourceNameSpan.textContent += ` (${siteOperator})`; }
                        const recencySpan = document.createElement('span'); recencySpan.className = 'result-recency'; recencySpan.textContent = `Recency: ${recencyText}`;
                        linkContent.appendChild(keywordsText); linkContent.appendChild(sourceNameSpan); linkContent.appendChild(recencySpan);
                        linkContainer.appendChild(visitBadge); linkContainer.appendChild(linkContent);
                        link.appendChild(linkContainer);
                        if (isLinkClicked(searchUrl)) { updateLinkVisualState(link, true); }
                        listItem.appendChild(link);
                        categorizedLinkElements[sourceDetail.category].push(listItem);
                        currentLinks.push(searchUrl);
                    });
                });
                const categoryTitles = { platforms: "Job Platforms & ATS", companies: "Major Companies & MNCs", gov: "Government, Banking & PSUs" };
                for (const category in categorizedLinkElements) {
                    if (categorizedLinkElements[category].length > 0) {
                        const groupDiv = document.createElement('div'); groupDiv.className = 'results-category-group';
                        const title = document.createElement('h3'); title.textContent = categoryTitles[category]; groupDiv.appendChild(title);
                        const ul = document.createElement('ul'); categorizedLinkElements[category].forEach(li => ul.appendChild(li)); groupDiv.appendChild(ul);
                        linksListContainer.appendChild(groupDiv);
                    }
                }
                if (currentLinks.length === 0) { linksListContainer.innerHTML = "<p>No search links generated.</p>"; }
                else {
                    openAllButton.style.display = 'block'; copyLinkButton.style.display = 'block';
                    document.getElementById('resultsCount').textContent = `(${currentLinks.length} links)`;
                    document.getElementById('trackingControls').style.display = 'flex';
                    updateTrackingInfo();
                    const params = new URLSearchParams();
                    params.set('k', document.getElementById('keywords').value.trim());
                    if(document.getElementById('location').value) params.set('l', document.getElementById('location').value);
                    if(document.getElementById('customLocation').value) params.set('cl', document.getElementById('customLocation').value.trim());
                    if(document.getElementById('recency').value) params.set('r', document.getElementById('recency').value);
                    if(document.getElementById('hiddenGemsToggle').checked) params.set('hg', '1');
                    const compressedSources = selectedSourceSites.map(site => sourceToIdMap.get(site)).join(',');
                    params.set('s', compressedSources);
                    const baseUrl = window.location.href.split('#')[0];
                    shareableLink = `${baseUrl}#!${params.toString()}`;
                }
                loadingMessage.style.display = 'none';
            }, 50);
        };
        
        function openAllLinks() { if (currentLinks.length === 0) return; const msg = `This will open ${currentLinks.length} links in new tabs. Continue?`; if (!confirm(msg)) return; gtag('event', 'bulk_open', { 'event_category': 'search', 'event_label': 'open_all_links', 'value': currentLinks.length }); currentLinks.forEach((url, i) => { setTimeout(() => { window.open(url, '_blank'); }, i * 100); }); };
        function toggleCustomLocation() { const l = document.getElementById("location"), c = document.getElementById("customLocation"); if(l && c) "other" === l.value ? (c.style.display = "block", c.focus()) : (c.style.display = "none", c.value = "") };
        function clearFormWithConfirm() { if (confirm('This will clear the form and your saved search configuration. Are you sure?')) { resetForm(true); } }
        
        function resetForm(clearStorage) {
            document.getElementById('keywords').value = '';
            document.getElementById('location').value = '';
            document.getElementById('recency').value = '';
            document.getElementById('customLocation').value = '';
            toggleCustomLocation();
            document.getElementById('hiddenGemsToggle').checked = false;
            handleHiddenGemsToggle();
            document.querySelectorAll('.job-source-checkbox').forEach(cb => cb.checked = false);
            updateMasterCheckboxes();
            if (clearStorage) {
                localStorage.removeItem('jobSearchLastConfig');
                document.getElementById('results').innerHTML = '';
                document.getElementById('searchSummary').style.display = 'none';
                document.getElementById('openAllButton').style.display = 'none';
                document.getElementById('copyLinkButton').style.display = 'none';
            }
        }
        
        function saveCurrentSearch() {
            try {
                const config = {
                    keywords: document.getElementById('keywords').value.trim(), location: document.getElementById('location').value,
                    customLocation: document.getElementById('customLocation').value.trim(), recency: document.getElementById('recency').value,
                    hiddenGems: document.getElementById('hiddenGemsToggle').checked,
                    selectedSources: Array.from(document.querySelectorAll('.job-source-checkbox:checked')).map(cb => cb.value)
                };
                localStorage.setItem('jobSearchLastConfig', JSON.stringify(config));
            } catch (e) { console.error("Could not save search configuration.", e); }
        }
        
        function loadLastSearch() {
            try {
                const savedConfig = localStorage.getItem('jobSearchLastConfig');
                if (!savedConfig) return;
                applyFormState(JSON.parse(savedConfig));
            } catch (e) { console.error("Could not load last search configuration.", e); localStorage.removeItem('jobSearchLastConfig'); }
        }
        
        function loadStateFromURL() {
            if (!window.location.hash || !window.location.hash.startsWith('#!')) return false;
            try {
                const params = new URLSearchParams(window.location.hash.substring(2));
                const config = {
                    keywords: params.get('k') || '', location: params.get('l') || '',
                    customLocation: params.get('cl') || '', recency: params.get('r') || '',
                    hiddenGems: params.get('hg') === '1',
                    selectedSources: (params.get('s') || '').split(',').map(id => idToSourceMap.get(id)).filter(Boolean)
                };
                applyFormState(config);
                history.replaceState(null, document.title, window.location.pathname + window.location.search);
                return true;
            } catch (e) { console.error("Failed to load state from URL.", e); return false; }
        }

        function applyFormState(config) {
            resetForm(false);
            document.getElementById('keywords').value = config.keywords || '';
            document.getElementById('location').value = config.location || '';
            document.getElementById('recency').value = config.recency || '';
            document.getElementById('hiddenGemsToggle').checked = config.hiddenGems || false;
            handleHiddenGemsToggle();
            if (config.location === 'other') {
                document.getElementById('customLocation').value = config.customLocation || '';
                toggleCustomLocation();
            }
            if (config.selectedSources && Array.isArray(config.selectedSources)) {
                config.selectedSources.forEach(sourceValue => {
                    const checkbox = document.querySelector(`.job-source-checkbox[value="${sourceValue}"]`);
                    if (checkbox && !checkbox.disabled) checkbox.checked = true;
                });
            }
            updateMasterCheckboxes();
        }
        
        function updateMasterCheckboxes() {
            const check = (masterId, childClass) => {
                const master = document.getElementById(masterId);
                const enabledChildren = Array.from(document.querySelectorAll(`.${childClass}:not(:disabled)`));
                if(master && enabledChildren.length > 0) { master.checked = enabledChildren.every(c => c.checked); } 
                else if (master) { master.checked = false; }
            };
            check('selectAllPlatforms', 'platform-checkbox');
            check('selectAllMNCs', 'mnc-checkbox');
            check('selectAllGov', 'gov-checkbox');
        }

        document.getElementById('keywords').addEventListener('keypress', function(event) { if (event.key === 'Enter') { event.preventDefault(); generateSearchLinks(); } });

        window.onload = () => {
            populateJobSources(jobPlatformConfig, 'jobPlatforms', 'platform-checkbox');
            populateJobSources(mncConfig, 'mncJobSources', 'mnc-checkbox');
            populateJobSources(govBankingConfig, 'govJobSources', 'gov-checkbox');
            populatePresets();
            loadClickTracking();
            
            // --- MODIFIED: Setup collapsible sections on load ---
            document.querySelectorAll('fieldset legend').forEach(legend => {
                const fieldset = legend.parentElement;
                if (!fieldset.classList.contains('active')) {
                    fieldset.querySelector('.collapsible-content').style.maxHeight = '0px';
                }
            });
            
            if (!loadStateFromURL()) {
                loadLastSearch();
            }
            updateRecentSearchesDisplay();
        };
    </script>
</body>
</html>
